@model MDS.Models.DateEngineer

@{
    Layout = "~/Views/Shared/_IFrameLayout.cshtml";
}
<h1>Enter Programmed Date</h1>


@using (Html.BeginForm(new { id = "rpForm" }))
{
    <div class="contact-info">
        <div class="content">
            <table>
                @if (MDS.Controllers.LoginController.DIA)
                {
                <tr>
                    <td>
                        DIA Client
                    </td>
                    <td>
                        @Html.CheckBoxFor(i => i.DIA)
                    </td>
                </tr>
                }
                <tr>
                    <td>
                        Please enter the programmed date of Service Job:
                    </td>
                    <td>
                        @(Html.Kendo().DatePicker()
                                            .Name("ToDate")
                                            .Value(DateTime.Now)
                                            .Format("dd/MM/yyyy")
                                            .HtmlAttributes(new { required = "required", data_required_msg = "Date is required." })
                                             .ParseFormats(new string[] { "dd/MM/yyyy", "dd/MM/yy" })
                        )
                    </td>
                </tr>

                <tr>
                    <td>
                        Please enter Engineer for Service Job:

                    </td>
                    <td>
                        @(Html.Kendo().DropDownListFor(m => m.EngineerID)
                                    .Name("EngineerID")
                                    .DataTextField("EngineerName")
                                    .DataValueField("EngineerID")
                                    .BindTo(Model.EngineerList)
                                    .HtmlAttributes(new { style = "width:100%", data_required_msg = "Principle Engineer is required." })
                                    .Filter("startswith")
                        )


                    </td>
                </tr>

                <tr>
                    <td> </td>
                    <td>
                        <a onclick="pick();" class="button"><span>OK</span></a>
                    </td>
                </tr>
            </table>
        </div>
    </div>
}

<script>

    $("#rpForm").kendoValidator({
    });
    function pick() {
        var Pdate = $("#ToDate").data("kendoDatePicker");
        if (Pdate == "") {
            alert("Please Enter the Date");
            return false;
        }
        parent.$("#hdProgrammeDate").val(Pdate.value());

        var pEngineerID = $("#EngineerID").val();
        if (pEngineerID == "") {
            alert("Please Select the Engineer");
            return false;
        }
        parent.$("#hdEngineer").val(pEngineerID);

        
        parent.$("#POwindow").data("kendoWindow").close();

    }
</script>


