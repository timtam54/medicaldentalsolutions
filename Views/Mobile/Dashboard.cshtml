@model List<MDS.Models.MobServices>
@{
    ViewBag.Title = "Services";
    Layout = null;
}
<style>
    a.my-class {
        color: #333333
    }

        a.my-class:active {
            color: #666666
        }

        a.my-class:link {
            color: #999999
        }

        a.my-class:visited {
            color: #CCCCCC
        }
body { font-family: Arial; }
</style>
<body>
    @using (Html.BeginForm("Dashboard", "Mobile", FormMethod.Post, new { id = "Dashboard" }))
    {
        <table style="width:100%;background-color:#000080;" border="0">
            <tr style="width:100%">
                <td style="background-color:white"><img alt="@MDS.Controllers.LoginController.CompanyName" title="@MDS.Controllers.LoginController.CompanyName" class="logo-image" src="@Url.Action("../images/logo.png")"></td>
                <td style="color:white;background-color:#000080"><h3>Services in the last month for @MDS.Controllers.MobileController.EngineerName(User.Identity.Name) </h3></td>
                <td style="color:white;background-color:#000080">@Html.ActionLink("Repairs", "DashboardRepairs", null, new { @class = "my-class" })</td>
                <td style="color:white;background-color:#000080">@Html.ActionLink("Log Off", "LogOff", "Login", null, new { @class = "my-class" })</td>
            </tr>
        </table>

        <table cellpadding="0" cellspacing="0" style="width:100%;border:1px solid black;" border-collapse="collapse;">
            <tr style="background-color:#000080;color:white;width:100%;">
                <th style="border:1px solid black;" border-collapse="collapse;">
                    Serial No
                </th>
                <th style="border:1px solid black;" border-collapse="collapse;">
                    Model
                </th>
                <th style="border:1px solid black;" border-collapse="collapse;">
                    Type
                </th>
            </tr>
            <tr>
                <th style="border:1px solid black;" border-collapse="collapse;" colspan="3">
                    Work Done
                </th>
            </tr>

            @{
                string Customer = ""; string JobCode = ""; DateTime? dte = DateTime.MinValue;
                for (int ii = 0; ii < Model.Count(); ii++)
                {
                    MDS.Models.MobServices item = Model[ii];
                    string color;
                    if (ii % 2 != 0)
                    {
                        color = "white";
                    }
                    else
                    {
                        color = "silver";
                    }
                    if ((Customer != item.Customer) || (JobCode != item.JobCode) || (dte != item.DateServiced))

                    {
                        Customer = item.Customer; JobCode = item.JobCode; dte = item.DateServiced;
                        <tr style="background-color:black;color:white;width:100%;">
                            <td style="width:100%;border:1px solid black;" border-collapse="collapse;" colspan="6">
                                <table style="width:100%">
                                    <tr style="background-color:black;color:white;width:100%;">
                                        <td style="border:1px solid black;" border-collapse="collapse;">
                                            @item.JobCode
                                        </td>
                                        <td style="border:1px solid black;" border-collapse="collapse;">
                                            @item.Customer
                                        </td>
                                        <td style="border:1px solid black;" border-collapse="collapse;">
                                            Serviced Date:
                                        </td>

                                        <td style="border:1px solid black;" border-collapse="collapse;">
                                            @Convert.ToDateTime(item.DateServiced).ToString("dd-MMM-yy")
                                        </td>

                                    </tr>
                                </table>
                            </td>
                        </tr>
                    }

                    <tr style="background-color:@color">
                        <td style="border:1px solid black;" border-collapse="collapse;">
                            @Html.ActionLink(item.EquipmentSerialNo, "Equipment", new { EquipmentID = item.EquipmentID }, null)
                        </td>
                        <td style="border:1px solid black;" border-collapse="collapse;">
                            @item.EquipmentModel
                        </td>
                        <td style="border:1px solid black;" border-collapse="collapse;">
                            @item.EquipmentType
                        </td>
                  
                        <td style="border:1px solid black;" border-collapse="collapse;" colspan="3">
                            @item.WorkDone
                        </td>
                    </tr>
                }
            }
        </table>
    }
</body>